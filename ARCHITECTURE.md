## Архитектура проекта WEB-DOC-FLOW

### Общий обзор

Проект WEB-DOC-FLOW представляет собой веб-приложение для архивации и управления документами. Приложение разработано на платформе Node.js и использует SQLite для хранения данных. Основные функции включают загрузку, замену, удаление и скачивание файлов, а также управление комментариями и историей изменений.

### Структура проекта

Проект имеет следующую структуру:

```
├── backend
│   ├── archiveRoutes.js
│   ├── database.js
│   ├── documentRoutes.js
│   ├── server.js
├── db
│   ├── database.db
├── public
│   ├── archive
│   │   ├── index.html
│   │   ├── script.js
│   │   ├── styles
│   │       ├── style-brutal.css
│   │       ├── style.css
│   ├── common
│   │   ├── footer.css
│   │   ├── footer.html
│   ├── document-management
│   │   ├── index.html
│   │   ├── script.js
│   │   ├── styles
│   │       ├── style.css
│   ├── fonts
│   │   ├── Code New Roman.otf
│   ├── media
│       ├── favicon.ico
│       ├── git.png
│       ├── MIREA_logo.png
├── .gitignore
├── CHANGELOG.md
├── CODE_OF_CONDUCT.md
├── jsconfig.json
├── LICENSE
├── package-lock.json
├── package.json
├── README.md
├── SECURITY.md
```

### Основные компоненты

#### Backend

- **server.js**: Основной файл сервера, который настраивает и запускает сервер Express. Подключает маршруты для архива и документооборота.
- **archiveRoutes.js**: Файл, содержащий маршруты для работы с архивом файлов, включая загрузку, замену, удаление и скачивание файлов, а также управление историей изменений и комментариями.
- **documentRoutes.js**: Файл, содержащий маршруты для работы с документами, включая загрузку, просмотр, изменение статуса, добавление комментариев и подписи.
- **database.js**: Файл для инициализации и управления базой данных SQLite. Содержит функции для создания таблиц и обработки ошибок базы данных.

#### Frontend

- **public/archive**: Содержит HTML, CSS и JavaScript файлы для интерфейса архива.
  - **index.html**: Основной HTML файл для интерфейса архива.
  - **script.js**: JavaScript файл для обработки событий и взаимодействия с сервером.
  - **styles**: Папка с CSS файлами для стилизации интерфейса.
- **public/document-management**: Содержит HTML, CSS и JavaScript файлы для интерфейса документооборота.
  - **index.html**: Основной HTML файл для интерфейса документооборота.
  - **script.js**: JavaScript файл для обработки событий и взаимодействия с сервером.
  - **styles**: Папка с CSS файлами для стилизации интерфейса.
- **public/common**: Содержит общие файлы, такие как футер.
  - **footer.css**: CSS файл для стилизации футера.
  - **footer.html**: HTML файл с содержимым футера.

### Использованные паттерны проектирования

1. **MVC (Model-View-Controller)**:
   - **Model**: Представлен базой данных SQLite и файлами `database.js`, `archiveRoutes.js`, `documentRoutes.js`, которые содержат логику работы с данными.
   - **View**: Представлен HTML и CSS файлами в папках `public/archive` и `public/document-management`.
   - **Controller**: Представлен файлами `archiveRoutes.js` и `documentRoutes.js`, которые обрабатывают запросы и взаимодействуют с моделью и представлением.

2. **Singleton**:
   - **database.js**: Использует паттерн Singleton для обеспечения единственного экземпляра подключения к базе данных.

3. **Middleware**:
   - **server.js**: Использует middleware для обработки CORS, JSON данных и статических файлов.

### База данных

Проект использует SQLite для хранения данных. Структура базы данных включает следующие таблицы:

- **files**: Хранит информацию о файлах, включая автора, имя файла, дату загрузки и изменения, расширение, размер, состояние, статус, связанные файлы и данные.
- **trash**: Хранит информацию о удаленных файлах.
- **history**: Хранит историю изменений файлов.
- **comments**: Хранит комментарии к файлам.
- **documents**: Хранит информацию о документах, включая имя файла, заголовок, свойства, метаданные, содержимое, данные и статус.
- **signatures**: Хранит информацию о подписях документов.
- **rejection_comments**: Хранит комментарии к отклоненным документам.

### Основные функции

- **Загрузка файлов**: Пользователи могут загружать файлы через интерфейс архива и документооборота.
- **Замена файлов**: Пользователи могут заменять существующие файлы новыми версиями.
- **Удаление файлов**: Пользователи могут удалять файлы, перемещая их в корзину.
- **Скачивание файлов**: Пользователи могут скачивать файлы из архива.
- **Управление комментариями**: Пользователи могут добавлять и просматривать комментарии к файлам и документам.
- **Управление историей изменений**: Пользователи могут просматривать и очищать историю изменений файлов.
- **Управление статусами документов**: Пользователи могут изменять статус документов, подписывать их, отклонять и пересматривать.

### Заключение

Проект WEB-DOC-FLOW представляет собой мощное и гибкое решение для управления документами и архивами. Использование современных технологий и паттернов проектирования обеспечивает высокую производительность и удобство использования.
